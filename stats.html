<!DOCTYPE html>
<html lang="en-US">
<!--hi-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gamingbarn / Stats</title>
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <script src="js/generate.js"></script>
    <!-- Essential and CSS -->
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/icons.css">
    <link rel="stylesheet" href="css/responsee.css">
    <link rel="stylesheet" href="owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="owl-carousel/owl.theme.css">

    <script>
        $(document).ready(function () {
            $("#gaming_barn_header").load("header.html");
            $("#gaming_barn_footer").load("footer.html");
        });
    </script>

</head>

<body class="size-1140">
    <div id="gaming_barn_header"></div>

    <main role="main">
        <!-- data/content -->
        <section class="grid box margin-bottom" style="margin-top: 0px;">
                <table class="please">
                    <td id="datapack_names" style="font-size: large;">Datapack Name<hr></td>
                    <td id="datapack_ids" style="font-size: large;">Datapack ID<hr></td>
                    <td id="datapack_pmc_downloads" style="font-size: large;">PMC Dowmloads<hr></td>
                    <td id="datapack_site_downloads" style="font-size: large;">Site Downloads<hr></td>
                    <td id="datapack_require_resouce_pack" style="font-size: large;">Requires Resource Pack<hr></td>
                </table>
        </section>
    </main>
    <script>
        (async () => {
            try {
                let results = await fetch("/.netlify/functions/get_stats").then(response => response.json());
                results.forEach(result => {
                    const listItem = document.createElement("tr");
                    listItem.innerText = result.datapack_name;
                    document.getElementById("datapack_names").appendChild(listItem);
                });
                results.forEach(result => {
                    const listItem = document.createElement("tr");
                    listItem.innerText = result.datapack_id;
                    document.getElementById("datapack_ids").appendChild(listItem);
                });
                results.forEach(result => {
                    const listItem = document.createElement("tr");
                    listItem.innerText = result.pmc_downloads;
                    document.getElementById("datapack_pmc_downloads").appendChild(listItem);
                });
                results.forEach(result => {
                    const listItem = document.createElement("tr");
                    listItem.innerText = result.gb_site_downloads;
                    document.getElementById("datapack_site_downloads").appendChild(listItem);
                });
                results.forEach(result => {
                    const listItem = document.createElement("tr");
                    listItem.innerText = result.require_resouce_pack;
                    document.getElementById("datapack_require_resouce_pack").appendChild(listItem);
                });
            } catch (error) {
                console.log(error);
            }
        })();
    </script>
    <div id="gaming_barn_footer"></div>
</body>

</html>